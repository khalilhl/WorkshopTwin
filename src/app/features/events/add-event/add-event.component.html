<form [formGroup]="eventForm" (submit)="onSubmit()">
  <div class="mb-3">
    <label for="exampleInputTitle1" class="form-label">Title </label>
    <input
      type="text"
      class="form-control"
      id="exampleInputTitle1"
      aria-describedby="TitleHelp"
      formControlName="title"
    />

    <div *ngIf="title?.invalid && title?.touched">
      <span
        *ngIf="eventForm.get('title')?.hasError('required')"
        style="color: red"
        >This field is required</span
      >
      <span *ngIf="title?.hasError('minlength')" style="color: red"
        >This field must contain at least 5 caracters</span
      >
      <span *ngIf="title?.errors?.['pattern']" style="color: red"
        >This field must respect the pattern</span
      >
    </div>
  </div>
  <div class="mb-3">
    <label for="exampleInputDescription1" class="form-label">Description</label>
    <textarea
      class="form-control"
      id="exampleInputDescription1"
      rows="4"
      formControlName="description"
    ></textarea>

    <div *ngIf="description?.invalid && description?.touched">
      <span
        *ngIf="eventForm.get('description')?.hasError('required')"
        style="color: red"
        >This field is required</span
      >
      <span *ngIf="description?.hasError('minlength')" style="color: red"
        >This field must contain at least 30 caracters</span
      >
    </div>
  </div>

  <div class="mb-3">
    <label for="exampleInputDate1" class="form-label">Date</label>
    <input
      type="date"
      class="form-control"
      id="exampleInputDate1"
      formControlName="date"
    />

    <div *ngIf="date?.invalid && date?.touched">
      <span *ngIf="date?.hasError('required')" style="color: red"
        >This field is required</span
      >
      <span *ngIf="date?.errors?.['futureDateInvalid']" style="color: red"
        >La date doit être dans le futur, minimum 7 days</span
      >
    </div>
  </div>

  <div class="mb-3">
    <label for="exampleInputPrix1" class="form-label">Prix</label>
    <input
      type="number"
      class="form-control"
      id="exampleInputPrix1"
      formControlName="prix"
      min="0"
      step="0.01"
    />
  </div>

  <div class="mb-3">
    <label for="exampleInputNbPlace1" class="form-label">NbPlace</label>
    <input
      type="number"
      class="form-control"
      id="exampleInputNbPlace1"
      formControlName="nbrPlace"
      min="1"
      max="100"
      step="1"
    />
  </div>

  <div class="mb-3">
    <label for="exampleInputLieu1" class="form-label">Lieu</label>
    <input
      type="text"
      class="form-control"
      id="exampleInputLieu1"
      formControlName="lieu"
    />
  </div>
  <div class="mb-3">
    <label for="exampleInputImage1" class="form-label">URL de l'image</label>
    <input
      type="url"
      class="form-control"
      id="exampleInputImage1"
      formControlName="urlImage"
      placeholder="https://example.com/image.png ou images/event.png"
    />
    <small class="form-text text-muted">
      Entrez l'URL de l'image ou le chemin relatif (ex: images/event.png)
    </small>
  </div>

  <div formArrayName="domaines">
    <label>Domaines</label>
    <div *ngFor="let domainCtrl of domaines.controls; let i = index">
      <input [formControlName]="i" />
      <div *ngIf="domainCtrl.touched && domainCtrl.invalid">
        <small *ngIf="domainCtrl.errors?.['required']"
          >Le domaine est requis.</small
        >
        <small *ngIf="domainCtrl.errors?.['minlength']"
          >Minimum 3 caractères.</small
        >
        <small *ngIf="domainCtrl.errors?.['maxlength']"
          >Maximum 20 caractères.</small
        >
      </div>
    </div>
    <button type="button" (click)="addDomain()">Ajouter un domaine</button>
  </div>

  <button type="submit" class="btn btn-primary" [disabled]="eventForm.invalid">
    Submit
  </button>
</form>
